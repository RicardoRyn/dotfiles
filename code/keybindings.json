[
    // 取消shift+l的默认行为
    {
        "key": "shift+l",
        "command": "-notebook.toggleLineNumbers",
        "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"
    },
    // 当聚焦于notebook的cell list时，使用 shift+l 来切换到下一个tab
    {
        "key": "shift+l",
        "command": "workbench.action.nextEditor",
        "when": "notebookCellListFocused && !inputFocus"
    },
    {
        "key": "ctrl+pagedown",
        "command": "-workbench.action.nextEditor"
    },
    // 当聚焦于notebook的cell list时，使用 shift+h 来切换到上一个tab
    {
        "key": "shift+h",
        "command": "workbench.action.previousEditor",
        "when": "notebookCellListFocused && !inputFocus"
    },
    {
        "key": "ctrl+pageup",
        "command": "-workbench.action.previousEditor"
    },
    // 当聚焦于笔记本的cell list时，使用 l 来编辑当前cell
    {
        "key": "l",
        "command": "notebook.cell.edit",
        "when": "notebookCellListFocused && !editorHoverFocused && !inputFocus && !notebookOutputInputFocused"
    },
    {
        "key": "enter",
        "command": "-notebook.cell.edit",
        "when": "notebookCellListFocused && !editorHoverFocused && !inputFocus && !notebookOutputInputFocused"
    },
    // 使用 ctrl+backspace 来清除所有cell的输出
    {
        "key": "ctrl+backspace",
        "command": "notebook.clearAllCellsOutputs"
    },
    // 使用原生neovim ctrl+o 或者 ctrl+i 来返回
    {
        "key": "ctrl+o",
        "command": "workbench.action.navigateBack",
        "when": "editorTextFocus && neovim.mode == 'normal'"
    },
    {
        "key": "ctrl+i",
        "command": "workbench.action.navigateForward",
        "when": "editorTextFocus && neovim.mode == 'normal'"
    },
    // 使用alt+j和alt+k来移动光标
    {
        "command": "vscode-neovim.send",
        "key": "alt+j",
        "when": "editorTextFocus && neovim.mode != insert",
        "args": "<A-j>"
    },
    {
        "command": "vscode-neovim.send",
        "key": "alt+k",
        "when": "editorTextFocus && neovim.mode != insert",
        "args": "<A-k>"
    },
    // 退出notebook的编辑模式
    {
        "key": "ctrl+j ctrl+k",
        "command": "notebook.cell.quitEdit",
        "when": "inputFocus && notebookEditorFocused && !editorHasMultipleSelections && !editorHasSelection && !editorHoverVisible && !inlineChatFocused && neovim.mode != insert"
    },
    {
        "key": "escape",
        "command": "-notebook.cell.quitEdit",
        "when": "inputFocus && notebookEditorFocused && !editorHasMultipleSelections && !editorHasSelection && !editorHoverVisible && !inlineChatFocused"
    },
    // 使用 ctrl+j; 来展开和折叠cell的输入
    {
        "key": "ctrl+j ctrl+k",
        "command": "notebook.cell.expandCellInput",
        "when": "notebookCellInputIsCollapsed && notebookCellListFocused"
    },
    {
        "key": "ctrl+k ctrl+c",
        "command": "-notebook.cell.expandCellInput",
        "when": "notebookCellInputIsCollapsed && notebookCellListFocused"
    },
    {
        "key": "ctrl+j ctrl+k",
        "command": "notebook.cell.collapseCellInput",
        "when": "notebookCellListFocused && !inputFocus && !notebookCellInputIsCollapsed"
    },
    {
        "key": "ctrl+k ctrl+c",
        "command": "-notebook.cell.collapseCellInput",
        "when": "notebookCellListFocused && !inputFocus && !notebookCellInputIsCollapsed"
    },
    {
        "key": "ctrl+h",
        "command": "-editor.action.startFindReplaceAction",
        "when": "editorFocus || editorIsOpen"
    },
    // 折叠所有的单元格输入
    {
        "key": "ctrl+shift+alt+c",
        "command": "notebook.cell.collapseAllCellInputs"
    },
    // 更改 ctrl+d 和 ctrl+u 的行为
    {
        "key": "ctrl+d",
        "command": "vscode-neovim.send",
        "when": "editorTextFocus && neovim.mode != 'insert'",
        "args": "5j"
    },
    {
        "key": "ctrl+u",
        "command": "vscode-neovim.send",
        "when": "editorTextFocus && neovim.mode != 'insert'",
        "args": "5k"
    },
    // 删除终端中ctrl+j的默认行为，方便完成命令提示
    {
        "key": "ctrl+j",
        "command": "-workbench.action.togglePanel"
    },
    // 打开外部终端
    {
        "key": "ctrl+`",
        "command": "workbench.action.terminal.openNativeConsole",
        "when": "!terminalFocus"
    },
    {
        "key": "ctrl+shift+c",
        "command": "-workbench.action.terminal.openNativeConsole",
        "when": "!terminalFocus"
    },
    // 打开内置终端
    {
        "key": "ctrl+/",
        "command": "workbench.action.terminal.toggleTerminal",
        "when": "terminal.active"
    },
    {
        "key": "ctrl+`",
        "command": "-workbench.action.terminal.toggleTerminal",
        "when": "terminal.active"
    },
    // 禁用 ctrl+shift+v 来开启markdown预览
    {
        "key": "ctrl+shift+v",
        "command": "-markdown.showPreview",
        "when": "!notebookEditorFocused && editorLangId == 'markdown'"
    },
    {
        "key": "ctrl+shift+v",
        "command": "-markdown-preview-enhanced.openPreview",
        "when": "editorLangId == 'markdown'"
    },
    // 单元格内代码的折叠和展开
    {
        "key": "alt+h",
        "command": "editor.fold",
        "when": "editorTextFocus && foldingEnabled"
    },
    {
        "key": "ctrl+shift+[",
        "command": "-editor.fold",
        "when": "editorTextFocus && foldingEnabled"
    },
    {
        "key": "alt+l",
        "command": "editor.unfold",
        "when": "editorTextFocus && foldingEnabled"
    },
    {
        "key": "ctrl+shift+]",
        "command": "-editor.unfold",
        "when": "editorTextFocus && foldingEnabled"
    },
    // 禁止使用 ctrl+n 来新建文件
    {
        "key": "ctrl+n",
        "command": "-workbench.action.files.newUntitledFile"
    },
    // 使用ctrl+c 来复制行
    {
        "key": "ctrl+c",
        "command": "editor.action.clipboardCopyAction",
        "when": "editorTextFocus && neovim.mode == 'visual'"
    },
    // 在终端中禁止ctrl+v复制，保证ctrl+v正确出发nushell的介绍提示词
    {
        "key": "ctrl+v",
        "command": "-workbench.action.terminal.paste",
        "when": "terminalFocus && terminalHasBeenCreated || terminalFocus && terminalProcessSupported"
    },
    // 在终端中使用ctrl+shift+=使终端最大化
    {
        "key": "ctrl+shift+oem_plus",
        "command": "workbench.action.toggleMaximizedPanel"
    },
    {
        "key": "ctrl+shift+oem_plus",
        "command": "-workbench.action.zoomIn"
    },
    // 在jupyter notebook中ctrl+shift+backspace重启kernel
    {
        "key": "shift+alt+backspace",
        "command": "jupyter.restartkernel"
    },
    // 使用类vim快捷键控制笔记本单元格
    {
        "key": "y",
        "command": "notebook.cell.copy",
        "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"
    },
    {
        "key": "c",
        "command": "-notebook.cell.copy",
        "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"
    },
    {
        "key": "c",
        "command": "notebook.cell.changeToCode",
        "when": "notebookEditorFocused && !inputFocus && !notebookOutputFocused && activeEditor == 'workbench.editor.notebook' && notebookCellType == 'markup'"
    },
    {
        "key": "y",
        "command": "-notebook.cell.changeToCode",
        "when": "notebookEditorFocused && !inputFocus && !notebookOutputFocused && activeEditor == 'workbench.editor.notebook' && notebookCellType == 'markup'"
    },
    {
        "key": "p",
        "command": "notebook.cell.paste",
        "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"
    },
    {
        "key": "v",
        "command": "-notebook.cell.paste",
        "when": "notebookEditorFocused && !inputFocus && !notebookOutputInputFocused"
    },
    // 采用ctrl+h和ctrl+l来切换窗口。以下两项既需要在此处设置，也需要在neovim的keymaps.lua中设置
    {
        "key": "ctrl+h",
        "command": "workbench.action.navigateLeft",
        "when": "!editorTextFocus && !terminalFocus && neovim.mode != 'cmdline'"
    },
    {
        "key": "ctrl+w h",
        "command": "-workbench.action.navigateLeft",
        "when": "!editorTextFocus && !terminalFocus && neovim.mode != 'cmdline'"
    },
    {
        "key": "ctrl+l",
        "command": "workbench.action.navigateRight",
        "when": "!editorTextFocus && !terminalFocus && neovim.mode != 'cmdline'"
    },
    {
        "key": "ctrl+w l",
        "command": "-workbench.action.navigateRight",
        "when": "!editorTextFocus && !terminalFocus && neovim.mode != 'cmdline'"
    },
    // 单元格内代码的折叠和展开
    {
        "key": "alt+h",
        "command": "editor.fold",
        "when": "editorTextFocus && foldingEnabled"
    },
    {
        "key": "ctrl+shift+[",
        "command": "-editor.fold",
        "when": "editorTextFocus && foldingEnabled"
    },
    {
        "key": "alt+l",
        "command": "editor.unfold",
        "when": "editorTextFocus && foldingEnabled"
    },
    {
        "key": "ctrl+shift+]",
        "command": "-editor.unfold",
        "when": "editorTextFocus && foldingEnabled"
    },
    // jupyter中cell的折叠和展开
    {
        "key": "alt+l",
        "command": "notebook.unfold",
        "when": "notebookEditorFocused && !inputFocus && activeEditor == 'workbench.editor.notebook'"
    },
    {
        "key": "ctrl+shift+oem_6",
        "command": "-notebook.unfold",
        "when": "notebookEditorFocused && !inputFocus && activeEditor == 'workbench.editor.notebook'"
    },
    {
        "key": "alt+h",
        "command": "notebook.fold",
        "when": "notebookEditorFocused && !inputFocus && activeEditor == 'workbench.editor.notebook'"
    },
    {
        "key": "ctrl+shift+oem_4",
        "command": "-notebook.fold",
        "when": "notebookEditorFocused && !inputFocus && activeEditor == 'workbench.editor.notebook'"
    },
]